<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ซองอั่งเปาเ</title>

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0b2a;
      --gold:#f7d56b;
      --gold2:#ffefb3;
      --red:#c5142c;
      --red2:#a60f23;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Thai", sans-serif;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,255,255,.08), transparent 55%),
        radial-gradient(900px 700px at 90% 80%, rgba(255,0,90,.12), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      color:#fff;
      padding:24px;
    }

    .wrap{
      width:min(520px, 100%);
      display:grid;
      gap:18px;
      justify-items:center;
    }

    .title{
      text-align:center;
      line-height:1.15;
    }
    .title h1{
      margin:0;
      font-size:clamp(18px, 2.8vw, 26px);
      font-weight:800;
      letter-spacing:.2px;
    }
    .title p{
      margin:6px 0 0;
      opacity:.85;
      font-size:14px;
    }

    /* Stage */
    .stage{
      width:min(420px, 100%);
      aspect-ratio: 4 / 3;
      display:grid;
      place-items:center;
      position:relative;
      border-radius:24px;
      background: rgba(255,255,255,.04);
      box-shadow: 0 18px 50px rgba(0,0,0,.25);
      overflow:hidden;
      padding:24px;
    }

    /* ตอนเปิดซอง ให้ตรา福หายไป */
.envelope.open .seal{
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.7);
  pointer-events: none;
  transition: opacity 250ms ease, transform 250ms ease;
}

/* ทำให้ seal มี transition ตอนปกติด้วย */
.seal{
  transition: opacity 250ms ease, transform 250ms ease;
}

    /* Envelope */
    .envelope{
      width:min(320px, 85%);
      aspect-ratio: 3 / 4;
      position:relative;
      transform: translateY(6px);
      filter: drop-shadow(0 16px 22px rgba(0,0,0,.28));
      user-select:none;
      cursor:pointer;
    }

    .env-back{
      position:absolute;
      inset:0;
      border-radius:22px;
      background:
        radial-gradient(120px 120px at 20% 15%, rgba(255,255,255,.12), transparent 55%),
        radial-gradient(160px 160px at 85% 30%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, var(--red), var(--red2));
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.06),
        inset 0 -18px 30px rgba(0,0,0,.22);
    }

    /* Pocket */
    .pocket{
      position:absolute;
      left:16px;
      right:16px;
      bottom:16px;
      height:68%;
      border-radius:18px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.18));
      box-shadow:
        inset 0 0 0 2px rgba(0,0,0,.14),
        inset 0 18px 30px rgba(255,255,255,.05);
      overflow:hidden;
    }

    /* Gold seal */
    .seal{
      position:absolute;
      left:50%;
      top:54%;
      transform: translate(-50%, -50%);
      width:88px;
      height:88px;
      border-radius:999px;
      background:
        radial-gradient(circle at 30% 30%, var(--gold2), var(--gold) 55%, #d9b24f 100%);
      box-shadow:
        0 16px 26px rgba(0,0,0,.25),
        inset 0 0 0 2px rgba(255,255,255,.25),
        inset 0 -12px 20px rgba(0,0,0,.18);
      display:grid;
      place-items:center;
      z-index:3;
    }
    .seal span{
      font-weight:900;
      color:#8b1a1a;
      font-size:28px;
      letter-spacing:1px;
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    /* Flap */
    .flap{
      position:absolute;
      left:0;
      right:0;
      top:0;
      height:55%;
      border-radius:22px 22px 18px 18px;
      transform-origin: 50% 6%;
      transform: rotateX(0deg);
      background:
        linear-gradient(180deg, rgba(255,255,255,.12), rgba(0,0,0,.18)),
        linear-gradient(180deg, #d01833, #a40f22);
      clip-path: polygon(0 0, 100% 0, 100% 64%, 50% 100%, 0 64%);
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.06),
        0 10px 18px rgba(0,0,0,.18);
      z-index:4;
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
    }

    /* Photo card */
    .card{
      position:absolute;
      left:50%;
      bottom:18px;
      transform: translateX(-50%) translateY(30px) scale(.92);
      width:82%;
      height:68%;
      border-radius:18px;
      background: rgba(255,255,255,.06);
      box-shadow: 0 18px 40px rgba(0,0,0,.32);
      overflow:hidden;
      z-index:2;
      opacity:0;
      transition:
        transform 900ms cubic-bezier(.2,.9,.2,1),
        opacity 500ms ease;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(180deg, rgba(255,255,255,.10), transparent 40%),
        radial-gradient(500px 250px at 20% 0%, rgba(255,255,255,.14), transparent 55%);
      pointer-events:none;
      z-index:2;
    }

    .card img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.03);
    }

    /* Confetti */
    .sparkles{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity 300ms ease;
    }
    .sparkles i{
      position:absolute;
      width:10px;
      height:10px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--gold) 55%, #caa241);
      filter: blur(.1px);
      animation: pop 1200ms ease forwards;
      opacity:0;
    }

    @keyframes pop{
      0%{ transform: translate(0,0) scale(.4); opacity:0; }
      20%{ opacity:1; }
      100%{ transform: translate(var(--x), var(--y)) scale(1); opacity:0; }
    }

    /* Open state */
    .envelope.open .flap{
      transform: rotateX(165deg);
    }
    .envelope.open .card{
      opacity:1;
      transform: translateX(-50%) translateY(-66px) scale(1);
    }
    .envelope.open .sparkles{
      opacity:1;
    }

    /* Controls */
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }

    button{
      border:0;
      border-radius:999px;
      padding:12px 16px;
      font-weight:800;
      letter-spacing:.2px;
      cursor:pointer;
      box-shadow: 0 14px 26px rgba(0,0,0,.25);
      transition: transform 120ms ease, filter 120ms ease;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .btn-open{
      background: linear-gradient(180deg, #ff3b63, #c5142c);
      color:#fff;
    }
    .btn-reset{
      background: rgba(255,255,255,.10);
      color:#fff;
      backdrop-filter: blur(10px);
    }

    .hint{
      opacity:.75;
      font-size:13px;
      text-align:center;
    }

    @media (prefers-reduced-motion: reduce){
      .flap, .card, .sparkles, .sparkles i{ transition:none !important; animation:none !important; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="title">
      <h1>ซองอั่งเปา</h1>
    </div>

    <div class="stage">
      <div class="envelope" id="envelope" aria-label="ซองอั่งเปา">
        <div class="env-back"></div>

        <div class="card" id="card" aria-hidden="true">
          <!-- รูปที่เด้งขึ้นมาจากซอง -->
          <img src="a.png" alt="รูปเด้งขึ้นมาจากซอง" />
        </div>

        <div class="pocket"></div>
        <div class="seal" aria-hidden="true"><span>福</span></div>
        <div class="flap" aria-hidden="true"></div>

        <div class="sparkles" id="sparkles" aria-hidden="true"></div>
      </div>
    </div>

    <div class="controls">
      <button class="btn-open" id="btnOpen">เปิด</button>
      <button class="btn-reset" id="btnReset">ปิด</button>
    </div>

  </div>

  <script>
    const envelope = document.getElementById('envelope');
    const btnOpen = document.getElementById('btnOpen');
    const btnReset = document.getElementById('btnReset');
    const sparkles = document.getElementById('sparkles');

    function makeSparkles(){
      sparkles.innerHTML = '';
      const n = 18;

      for(let i=0;i<n;i++){
        const s = document.createElement('i');

        const startX = 50 + (Math.random()*18 - 9);
        const startY = 40 + (Math.random()*10 - 5);

        const dx = (Math.random()*240 - 120);
        const dy = (Math.random()*-220 - 60);

        s.style.left = startX + '%';
        s.style.top = startY + '%';
        s.style.setProperty('--x', dx + 'px');
        s.style.setProperty('--y', dy + 'px');
        s.style.animationDelay = (Math.random()*120) + 'ms';
        s.style.width = (6 + Math.random()*10) + 'px';
        s.style.height = s.style.width;

        sparkles.appendChild(s);
      }
    }

    function openEnvelope(){
      if(envelope.classList.contains('open')) return;
      makeSparkles();
      envelope.classList.add('open');
    }

    function resetEnvelope(){
      envelope.classList.remove('open');
      sparkles.innerHTML = '';
    }

    btnOpen.addEventListener('click', openEnvelope);
    btnReset.addEventListener('click', resetEnvelope);

    envelope.addEventListener('click', () => {
      if(envelope.classList.contains('open')) resetEnvelope();
      else openEnvelope();
    });
  </script>
</body>
</html>
